# go-broadcast sync configuration example
# Version 1 is the only supported version
version: 1

# Source repository configuration
source:
  # Repository in org/repo format
  repo: "org/template-repo"
  # Branch to sync from (defaults to "master" if not specified)
  branch: "master"

# Default settings applied to all targets
defaults:
  # Prefix for sync branches (defaults to "sync/template")
  branch_prefix: "sync/template"
  # Labels to apply to PRs (defaults to ["automated-sync"])
  pr_labels:
    - "automated-sync"
    - "template-update"

# Target repositories to sync to
targets:
  # First target repository
  - repo: "org/service-a"
    # Files to sync from source to target
    files:
      # Sync GitHub Actions workflow
      - src: ".github/workflows/ci.yml"
        dest: ".github/workflows/ci.yml"
      # Sync linting configuration
      - src: ".golangci.json"
        dest: ".golangci.json"
      # Sync Makefile
      - src: "Makefile"
        dest: "Makefile"
    # Optional transformations
    transform:
      # Replace repository names in files (e.g., in go.mod)
      repo_name: true
      # Template variables to replace
      variables:
        SERVICE_NAME: "service-a"
        PORT: "8080"

  # Second target repository with minimal configuration
  - repo: "org/service-b"
    files:
      - src: ".github/workflows/ci.yml"
        dest: ".github/workflows/ci.yml"
      - src: "scripts/test.sh"
        dest: "scripts/test.sh"

  # Third target repository with different destination paths
  - repo: "org/service-c"
    files:
      # Can rename files during sync
      - src: "README.template.md"
        dest: "README.md"
      # Can sync to different directory structure
      - src: "configs/default.yaml"
        dest: "config/app.yaml"
